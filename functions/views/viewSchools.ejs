<% include nav.ejs %>
<div class="row"></div>
<div class="row">
	<div class="col l3"></div>
	<div class="col s12 l6">
		<div class="card">
			<form action="/reg_school" method="POST">
				<div class="card-content">
					<h4 style="color: #faae29">Schools Registered</h4>
					<br>
					<ul class="collapsible popout" data-collapsible="accordion">
						<% for(var i=0;i<Object.keys(viewschools).length;i++) { %>
						<li>
							<div class="collapsible-header"><i class="material-icons">school</i>
								<%= viewschools[i].parent %>
							</div>

							<div class="collapsible-body">
								<% for (key in viewschools[i].child.Students){ %>
								<span>
									<p style="size: 20px;">
										<%= key %> :
										<%= viewschools[i].child.Students[key] %>
									</p>
								</span>
								<br>
								<% } %>
							</div>
						</li>
						<% }%>
					</ul>
				</div>
			</form>
		</div>
	</div>
</div>
<script defer src="/__/firebase/5.5.5/firebase-app.js"></script>
<script defer src="/__/firebase/5.5.5/firebase-firestore.js"></script>
<script defer src="/__/firebase/init.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script>
	var db = firebase.firestore();
	var query = db.collection("Schools").limit(50);
	query.onSnapshot(function(snapshot) {
    if (!snapshot.size) return renderer.empty(); // Display "There are no restaurants".

    snapshot.docChanges().forEach(function(change) {
      if (change.type === 'removed') {
        renderer.remove(change.doc);
      } else {
        renderer.display(change.doc);
      }
    });
  });
</script>


<%include foot.ejs %>